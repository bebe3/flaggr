---
/**
 * Astro Header - For static pages (About, etc.)
 *
 * Why are there two Headers?
 * - HeaderAstro.astro: For static pages. Uses CSS to toggle theme icons, zero flicker.
 * - Header.tsx: For FlaggrApp. Requires React state management integration.
 *
 * How theme switching works:
 * 1. Inline script in Layout.astro sets dark class before page renders
 * 2. CSS dark:hidden / dark:block switches icons instantly
 * 3. Button click updates class and localStorage via script tag
 */
---

<header
  dir="ltr"
  class="flex h-14 shrink-0 items-center justify-between bg-linear-to-r from-slate-100 to-slate-200 px-4 shadow-sm dark:from-slate-900 dark:to-slate-800 md:px-5"
>
  <a
    href="/"
    class="bg-linear-to-r from-indigo-600 via-blue-500 to-indigo-400 bg-clip-text pb-1 text-2xl font-bold leading-relaxed text-transparent dark:from-indigo-400 dark:via-blue-400 dark:to-indigo-300"
  >
    Flaggr
  </a>
  <div class="flex items-center gap-2 md:gap-3">
    <button
      id="theme-toggle"
      class="inline-flex size-9 cursor-pointer items-center justify-center rounded-full text-slate-500 transition-colors hover:bg-slate-200/70 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-700/70 dark:hover:text-slate-200"
      aria-label="Toggle theme"
    >
      <!-- Moon icon (light mode) -->
      <svg
        class="size-4 dark:hidden"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
      </svg>
      <!-- Sun icon (dark mode) -->
      <svg
        class="hidden size-4 dark:block"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="4"></circle>
        <path d="M12 2v2"></path>
        <path d="M12 20v2"></path>
        <path d="m4.93 4.93 1.41 1.41"></path>
        <path d="m17.66 17.66 1.41 1.41"></path>
        <path d="M2 12h2"></path>
        <path d="M20 12h2"></path>
        <path d="m6.34 17.66-1.41 1.41"></path>
        <path d="m19.07 4.93-1.41 1.41"></path>
      </svg>
    </button>
    <a
      href="/about"
      class="inline-flex size-9 items-center justify-center rounded-full text-slate-500 transition-colors hover:bg-slate-200/70 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-700/70 dark:hover:text-slate-200"
      aria-label="About"
    >
      <!-- Info icon -->
      <svg
        class="size-4"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M12 16v-4"></path>
        <path d="M12 8h.01"></path>
      </svg>
    </a>
  </div>
</header>

<script>
  document.getElementById('theme-toggle')?.addEventListener('click', () => {
    const isDark = document.documentElement.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  });
</script>
